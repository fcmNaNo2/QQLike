# 使用说明

## 架构说明

```
┌─────────────────────────────────────────────────────────┐
│                      你的主号                            │
│                   QQ: 999999999                         │
│                  （被点赞的账号）                         │
└─────────────────────────────────────────────────────────┘
                          ▲
                          │ 点赞
          ┌───────────────┼───────────────┐
          │               │               │
    ┌─────┴─────┐   ┌─────┴─────┐   ┌─────┴─────┐
    │  小号1     │   │  小号2     │   │  小号3     │
    │ 111111111 │   │ 222222222 │   │ 333333333 │
    └─────┬─────┘   └─────┬─────┘   └─────┬─────┘
          │               │               │
    ┌─────┴─────┐   ┌─────┴─────┐   ┌─────┴─────┐
    │NapCat容器1│   │NapCat容器2│   │NapCat容器3│
    │  (登录)   │   │  (登录)   │   │  (登录)   │
    └─────┬─────┘   └─────┬─────┘   └─────┬─────┘
          │               │               │
    ┌─────┴─────┐   ┌─────┴─────┐   ┌─────┴─────┐
    │点赞机器人1│   │点赞机器人2│   │点赞机器人3│
    │ (定时任务)│   │ (定时任务)│   │ (定时任务)│
    └───────────┘   └───────────┘   └───────────┘
```

## 为什么要分开？

### NapCat 容器（napcat-account1/2/3）
- **作用**：登录你的小号QQ，提供 OneBot API 接口
- **需要做的**：扫码登录小号QQ
- **类比**：相当于在手机上登录QQ

### 点赞机器人容器（like-bot1/2/3）
- **作用**：调用 NapCat 的 API，定时给主号点赞
- **需要做的**：配置主号QQ号和点赞时间
- **类比**：相当于一个自动化脚本

## 配置步骤

### 第一步：修改 docker-compose.yml

```yaml
# 小号1的QQ号（用来点赞的账号）
ACCOUNT=111111111  # 改成你的小号1

# 主号QQ（被点赞的账号）
TARGET_FRIENDS=999999999  # 改成你的主号
```

### 第二步：启动服务

```bash
./start.sh
```

### 第三步：登录小号

从 napcat 容器日志里复制 WebUI 登录链接（含 token），然后扫码登录：

```bash
docker compose logs --tail=50 napcat-account1 | grep -E "WebUi Token|User Panel Url"
```

然后访问：`http://localhost:6099/webui?token=xxx`

### 第四步：验证

等到设定的时间（默认09:00），机器人会自动给主号点赞

你也可以打开点赞管理页面，手动点击“点赞一次”：

- 单 bot 管理页：`http://localhost:8088`
- 统一管理页（推荐）：`http://localhost:8099`

## 多小号配置

如果你有3个小号，想让它们都给主号点赞：

1. **取消注释** `docker-compose.yml` 中的 account2、account3 配置
2. **修改QQ号**：
   ```yaml
   # 小号2
   ACCOUNT=222222222
   TARGET_FRIENDS=999999999  # 主号（和小号1一样）
   
   # 小号3
   ACCOUNT=333333333
   TARGET_FRIENDS=999999999  # 主号（和小号1一样）
   ```
3. **重启服务**：
   ```bash
   docker compose up -d
   ```
4. **分别登录**：
   - 小号2：访问 `http://localhost:6100/webui`
   - 小号3：访问 `http://localhost:6101/webui`
   - 小号4：访问 `http://localhost:6102/webui`
   - 小号5：访问 `http://localhost:6103/webui`

## 实际效果

假设你有：
- 主号：888888888（你的大号）
- 小号1：111111111
- 小号2：222222222
- 小号3：333333333

配置后：
- 每天 09:00，小号1 给主号点赞 10 次
- 每天 09:05，小号2 给主号点赞 10 次
- 每天 09:10，小号3 给主号点赞 10 次

**结果**：你的主号每天自动获得 30 个赞！

## 常见问题

### Q: 为什么不能直接用主号登录？
A: 因为你需要用小号给主号点赞，不能自己给自己点赞。

### Q: 小号需要和主号是好友吗？
A: 是的，小号必须先加主号为好友，才能点赞。

### Q: 可以给多个主号点赞吗？
A: 可以，修改 `TARGET_FRIENDS` 为逗号分隔：
```yaml
TARGET_FRIENDS=888888888,777777777,666666666
```

### Q: 为什么要错开时间？
A: 避免多个小号同时点赞，看起来更自然，降低风险。

### Q: 一个小号可以给多个主号点赞吗？
A: 可以，在 `TARGET_FRIENDS` 中添加多个QQ号即可。

## 端口对应表

| 小号 | WebUI登录地址 | API端口 | 容器名 |
|------|--------------|---------|--------|
| 小号1 | http://localhost:6099/webui | 3000 | napcat_account1 |
| 小号2 | http://localhost:6100/webui | 3001 | napcat_account2 |
| 小号3 | http://localhost:6101/webui | 3002 | napcat_account3 |

## 检查运行状态

```bash
# 查看所有容器状态
docker compose ps

# 查看小号1的日志
docker compose logs -f napcat-account1

# 查看点赞机器人1的日志
docker compose logs -f like-bot1

# 测试小号1是否登录成功
curl -sS -X POST http://localhost:3000/get_login_info \
  -H "Content-Type: application/json" \
  -d '{}'
```

## 手动测试点赞

```bash
# 用小号1给主号点赞（测试用）
curl -X POST http://localhost:3000/send_like \
  -H "Content-Type: application/json" \
  -d '{"user_id": "999999999", "times": 10}'
```

如果返回 `{"status":"ok"}` 说明成功！
